@page "/artist"
@using EuropArt.Shared.Artists
@using System.Globalization
@inject IArtistService ArtistService
@inject IStringLocalizer<EuropArt.Shared.Resources.Artists.Index> Loc

<h3>@Loc["titel"]</h3>

<div class="row">
    @if (artists is null)
    {
        <p>Loading...</p>
    }
    else
    {
        @foreach (var artist in artists)
        {
            <div class="col-4 text-center">
                <div class="badge-kunstenaars">
                    <div class="profile-pic">
                        <a href="/artist/@artist.Id"><img src="@artist.ImagePath" /></a>
                    </div>
                    <h2>@artist.Name</h2>
                    <span class="locatie"><img src="images/locate.svg" /> @artist.City</span><br />
                    <span class="kunstwerken">@artist.AmountOfArtworks @Loc["artworks"]</span>
                </div>
            </div>
        }
    }
</div>

@code {
    private List<ArtistDto.Index> artists;

    protected override async Task OnInitializedAsync()
    {
        ArtistRequest.GetIndex request = new();
        var response = await ArtistService.GetIndexAsync(request);
        artists = response.Artists;
    }
}
